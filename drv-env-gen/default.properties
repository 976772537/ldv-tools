#EnvParams can be specified using environment variable ENVGEN_PROPERTIES
#   envgen now supports different models, namely:
#     type=PlainParams: single sequence of calls
#       sorted=true: with sorting according to known functions preconditions on the order
#		check={true|false}: {with|without} checking return values
#       sorted=false: without sorting according to known functions preconditions on the order
#     type=SequenceParams: functions in nondeterministic switch, potentially arbitrary sequences
#       length={one(switch without loops)| n(switch in for loop)| infinite(switch in while loop)}
#       check={true|false}: {with|without} checking return values
#       stateful={true|false}: {support| no support} known functions preconditions on the order
#
# Known functions preconditions on the order are defined below in this file
#
# Default plain_sorted_withcheck
include = plain_sorted_withcheck

#
# To include all models use:
#include = plain,plain_sorted,plain_sorted_withcheck,sequence_one_withcheck,sequence_infinity_withcheck,sequence_n3_withcheck,sequence_one,sequence_infinity,sequence_n3,sequence_one_withcheck_statefull,sequence_infinite_withcheck_statefull,sequence_n3_withcheck_statefull,sequence_one_stateful,sequence_infinity_statefull,sequence_n3_statefull
#sequence_one_withcheck_statefull, sequence_one_stateful - in case of single call sequence state has no sense, moreover it prevents calling functions other than the first
#

plain.type = PlainParams
plain.init = false
plain.sorted = false
plain.check = false
plain_sorted.type = PlainParams
plain_sorted.sorted = true
plain_sorted.check = false
plain_sorted_withcheck.type = PlainParams
plain_sorted_withcheck.init = false
plain_sorted_withcheck.sorted = true
plain_sorted_withcheck.check = true

sequence_one_withcheck.type = SequenceParams
sequence_one_withcheck.init = false
sequence_one_withcheck.check = true
sequence_one_withcheck.stateful = false
sequence_one_withcheck.length = one
sequence_infinity_withcheck.type = SequenceParams
sequence_infinity_withcheck.init = false
sequence_infinity_withcheck.check = true
sequence_infinity_withcheck.stateful = false
sequence_infinity_withcheck.length = infinite
sequence_n3_withcheck.type = SequenceParams
sequence_n3_withcheck.init = false
sequence_n3_withcheck.check = true
sequence_n3_withcheck.stateful = false
sequence_n3_withcheck.length = n
sequence_n3_withcheck.n = 3

sequence_one.type = SequenceParams
sequence_one.init = false
sequence_one.check = false
sequence_one.stateful = false
sequence_one.length = one
sequence_infinity.type = SequenceParams
sequence_infinity.init = false
sequence_infinity.check = false
sequence_infinity.stateful = false
sequence_infinity.length = infinite
sequence_n3.type = SequenceParams
sequence_n3.init = false
sequence_n3.check = false
sequence_n3.stateful = false 
sequence_n3.length = n
sequence_n3.n = 3

#sequence_one_withcheck_statefull.type = SequenceParams
#sequence_one_withcheck_statefull.init = false
#sequence_one_withcheck_statefull.check = true
#sequence_one_withcheck_statefull.stateful = true 
#sequence_one_withcheck_statefull.length = one
sequence_infinite_withcheck_stateful.type = SequenceParams
sequence_infinite_withcheck_stateful.init = false
sequence_infinite_withcheck_stateful.check = true
sequence_infinite_withcheck_stateful.stateful = true 
sequence_infinite_withcheck_stateful.length = infinite
sequence_n3_withcheck_statefull.type = SequenceParams
sequence_n3_withcheck_statefull.init = false
sequence_n3_withcheck_statefull.check = true
sequence_n3_withcheck_statefull.stateful = true 
sequence_n3_withcheck_statefull.length = n
sequence_n3_withcheck_statefull.n = 3

#sequence_one_stateful.type = SequenceParams
#sequence_one_stateful.init = false
#sequence_one_stateful.check = false
#sequence_one_stateful.stateful = true 
#sequence_one_stateful.length = one
sequence_infinity_statefull.type = SequenceParams
sequence_infinity_statefull.init = false
sequence_infinity_statefull.check = false
sequence_infinity_statefull.stateful = true 
sequence_infinity_statefull.length = infinite
sequence_n3_statefull.type = SequenceParams
sequence_n3_statefull.init = false
sequence_n3_statefull.check = false
sequence_n3_statefull.stateful = true 
sequence_n3_statefull.length = n
sequence_n3_statefull.n = 3


# Known functions preconditions on the order 

struct_patterns=default_main, usb_driver, file_operations, scsi_driver, sd_desc, platform_driver, net_device_ops

# Variables to be replaced in the patterns:
# $retvar
# $fcall
# $p0,...,$pn
# $check_label
# $indent
#
# Predefined expressions: 
# $CHECK_NONZERO
# $CHECK_LESSTHANZERO


#default_main
pattern.default_main.0.name = open
pattern.default_main.0.check = $CHECK_NONZERO

pattern.default_main.1.name = probe
pattern.default_main.1.check = $CHECK_NONZERO

pattern.default_main.2.name = connect
pattern.default_main.2.check = $CHECK_NONZERO

pattern.default_main.3.name = read
pattern.default_main.3.check = $CHECK_LESSTHANZERO

pattern.default_main.3.name = write
pattern.default_main.3.check = $CHECK_LESSTHANZERO

pattern.default_main.3.name = close
pattern.default_main.3.check = 

#usb_driver
pattern.usb_driver.0.name = probe
pattern.usb_driver.0.check = $CHECK_NONZERO

pattern.usb_driver.1.name = suspend
pattern.usb_driver.1.check = 

pattern.usb_driver.2.name = resume
pattern.usb_driver.2.check = 

pattern.usb_driver.3.name = pre_reset
pattern.usb_driver.3.check = 

pattern.usb_driver.4.name = reset_resume
pattern.usb_driver.4.check = 

pattern.usb_driver.5.name = post_reset
pattern.usb_driver.5.check = 

pattern.usb_driver.6.name = disconnect
pattern.usb_driver.6.check = 

pattern.usb_driver.7.name = remove
pattern.usb_driver.7.check = 

pattern.usb_driver.8.name = shutdown
pattern.usb_driver.8.check = 

#file_operations
pattern.file_operations.0.name = open
pattern.file_operations.0.check = $CHECK_NONZERO

pattern.file_operations.1.name = read
pattern.file_operations.1.check = $CHECK_LESSTHANZERO

pattern.file_operations.2.name = write
pattern.file_operations.2.check = \$CHECK_LESSTHANZERO

pattern.file_operations.3.name = llseek
pattern.file_operations.3.check = 

pattern.file_operations.4.name = release
pattern.file_operations.4.check = 

#scsi_driver
pattern.scsi_driver.0.name = probe
pattern.scsi_driver.0.check = $CHECK_NONZERO

pattern.scsi_driver.1.name = suspend
pattern.scsi_driver.1.check = 

pattern.scsi_driver.2.name = resume
pattern.scsi_driver.2.check = 

pattern.scsi_driver.3.name = rescan
pattern.scsi_driver.3.check = 

pattern.scsi_driver.4.name = done
pattern.scsi_driver.4.check = 

pattern.scsi_driver.5.name = shutdown
pattern.scsi_driver.5.check = 

pattern.scsi_driver.6.name = remove
pattern.scsi_driver.6.check = 

#sd_desc
pattern.sd_desc.0.name = stop0
pattern.sd_desc.0.check = \n$indent mutex_lock(&$p0->usb_lock);\n$indent$fcall; \n$indent mutex_unlock(&$p0->usb_lock);

#platform_driver
pattern.platform_driver.0.name = probe
pattern.platform_driver.0.check = $CHECK_NONZERO

pattern.platform_driver.1.name = suspend
pattern.platform_driver.1.check = 

pattern.platform_driver.2.name = suspend_late
pattern.platform_driver.2.check = 

pattern.platform_driver.3.name = resume_early
pattern.platform_driver.3.check = 

pattern.platform_driver.4.name = resume
pattern.platform_driver.4.check = 

pattern.platform_driver.5.name = remove
pattern.platform_driver.5.check = 

pattern.platform_driver.6.name = shutdown
pattern.platform_driver.6.check = 

#net_device_ops
pattern.net_device_ops.0.name = ndo_init
pattern.net_device_ops.0.check = $CHECK_NONZERO

pattern.net_device_ops.1.name = ndo_open
pattern.net_device_ops.1.check = $CHECK_LESSTHANZERO

pattern.net_device_ops.2.name = ndo_stop
pattern.net_device_ops.2.check = $CHECK_NONZERO

pattern.net_device_ops.3.name = ndo_uninit
pattern.net_device_ops.3.check = 

