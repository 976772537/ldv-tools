	Linux Driver Verification (LDV)

	INSTALLATION

	http://linuxtesting.org/project/ldv/


MINIMAL PREREQUISITES

"Minimal prerequisites" are necessary for installing console tools:

	o OCaml 3.10 or 3.11.0-3.11.2 (for BLAST verifier)
	o Perl 5.10
	o Ruby 1.8.7
	o JDK or OpenJDK 1.6.0
	o ant 1.8.0 or greater
	o GNU Make 3.81
	o GCC (32-bit version) with C++ support
	o gcc-c++
	o glibc-devel-32bit
	o patch
	o GNU M4
	o GNU Autoconf
	o GNU Automake
	o GNU binutils
	o GNU Multiple Precision Library (GMP), development version (for BLAST)
	o MPFR Library, development version
	o Flex or lex
	o Yacc or Bison
	o libncurses
	o MySQL (with InnoDB)server and console client, with development headers and libraries
	o Perl modules (install via `sudo cpan Module::Name` or via package manager):
		- DBI
		- DBD::mysql
		- File::Cat
		- File::Find
		- File::Copy::Recursive
		- File::Path   (update to the newest version)
		- File::MimeInfo
		- File::Basename
		- Text::Highlight
		- Tie::Hash::Indexed
		- XML::Twig
		- XML::Writer
		- SOAP::Lite
		- IO::Socket::INET;
	o CPIO archiver
	o PAX archiver
	o Ruby gem manager
	o Ruby gems:
		- gem activerecord
		- gem mysql
		- gem SysVIPC   (Warning: case-sensitive!)
		- gem libxml-ruby (at least 2.1.1)
		   * requires libxml2-devel
		- gem bones
	o gzip
	o tar
	o bzip2
	o rake


ADDITIONAL PREREQUISITES

Additional prereqiosites are not necessary for console tools, but are required
for LDV-online, statistics visualization, in addition to the prerequisites
listed above:

	o Apache 2.x
	o Apache 2.x modules:
                - mod_php
	        - mod_rewrite
	        - mod_env
	o PHP 5.3
	o PHP modules:
		- Apache
		- PDO mysql
		- PDO sqlite
		- DOM
	o Markdown code formatter

LDV-GIT ADDITIONAL PREREQUISITES

	o Graph.pm Perl module
	o `perldoc` Perl util

CLUSTER PREREQUISITES

	o sudo gem install rdoc
	o sudo gem install rspec
	o sudo gem install json
	o apt-get install -y libopenssl-ruby (required on Ubuntu systems)
	o FUSE development headers (fuse-devel/libfuse-dev)
	o sshfs (FUSE)
	o logrotate
	o Ruby ruby 1.9.2p180 (older versions might not work)
	o Erlang
	o RabbitMQ server 2.0.0 (greater versions are not supported!)
		http://www.rabbitmq.com/releases/rabbitmq-server/v2.0.0/rabbitmq-server_2.0.0-1_all.deb (Debian)
		http://www.rabbitmq.com/releases/rabbitmq-server/v2.0.0/rabbitmq-server-2.0.0-1.suse.noarch.rpm (Suse)





CONFIGURING EXISTSING SOFTWARE

Not only LDV requires the software described to be installed.  You also should
ensure that it's tweaked correctly.


MySQL

Extend "maximal packet size".  LDV uploads source files to database, and they
may get huge. 10Mb is enough; just add the following lines to /etc/my.cnf:
	[mysqld]
	max_allowed_packet = 10M

To upload knowledge base triggers to databases you need to set up following 
variable from super user mysql console:
	SET GLOBAL log_bin_trust_function_creators = 1;
This definition works until mysql server is stopped.
Following lines inside /etc/my.cnf (openSUSE) in section [mysqld] works everytime:
	# This allows nonsuper users to create triggers and functions
	log_bin_trust_function_creators = 1

LDV tools causes mysql to create big binary logs during their work. To avoid this
one can limit these logs by adding to section [mysqld] following lines:
	# To clean up old binary logs automatically
	expire_logs_days=7
or disable mysql binary logs at all by commenting a log-bin variable setting.
In order to make changes to take effect you need to restart mysql server or/and
run 'flush logs' command in mysql console (under root). 
For more details you can see http://forge.ispras.ru/issues/2316.

INSTALLING LDV

First, install a prerequisites listed above, according to the path of LDV you
need.

Note, that '3' and '5' most likely require root privelegies and additional
tuning. See 'stats-visualizer/README' for details. See 'ldv-online/README'
before installing '6' and '7'.

  1. To install the LDV console tools use:
     prefix=/path/to/your/installation/directory make install

  2. To install verifiers only:
     prefix=/path/to/your/installation/directory make install-verifiers

  3. To install the statistics server use:
     sudo prefix=/path/to/some/directory make install-visualization
     (Since it will most likely require root access, install it separately)

  4. To install tests use:
     prefix=/path/to/your/installation/directory make install-testing

  5. To install everything use (also including ldv-online):
     prefix=/path/to/your/installation/directory make install-all

  6. To install ldv-git:
     prefix=/path/to/your/installation/directory make install-ldv-git

  7. To install cluster (both node and server):
     prefix=/path/to/your/installation/directory make install-ldv-cluster

  8. To install error trace visualizer:
     prefix=/path/to/your/installation/directory make install-etv

For some tools that use LDV to work, you need to add directory with binaries to
your path:

	export PATH=$PATH:/path/to/prefix/bin

Here `/path/to/prefix` is what you've specified as prefix wile installing the
above tools.

You may skip installing BLAST reachability C verifier (this is useful if you
have your own, and are not going to use the default one).  To do this, add the
following variable when installing:

	no_blast=y prefix=/path make install


